{"ast":null,"code":"import * as echarts from 'echarts';\nconst barOption = {\n  title: {\n    text: '数据趋势图',\n    left: 'center'\n  },\n  tooltip: {\n    trigger: 'axis'\n  },\n  legend: {\n    left: 'left'\n  },\n  xAxis: {\n    type: 'category',\n    data: []\n  },\n  yAxis: {\n    type: 'value'\n  },\n  series: [{\n    name: '菜谱',\n    data: [],\n    type: 'bar',\n    smooth: true\n  }, {\n    name: '笔记',\n    data: [],\n    type: 'bar',\n    smooth: true\n  }]\n};\nconst pieOption = {\n  title: {\n    text: '菜谱分类统计',\n    subtext: '比例图',\n    left: 'center'\n  },\n  tooltip: {\n    trigger: 'item'\n  },\n  legend: {\n    orient: 'vertical',\n    left: 'left'\n  },\n  series: [{\n    type: 'pie',\n    center: ['50%', '60%'],\n    radius: '50%',\n    data: [],\n    label: {\n      show: true,\n      formatter(param) {\n        return param.name + ' (' + param.percent + '%)';\n      }\n    },\n    emphasis: {\n      itemStyle: {\n        shadowBlur: 10,\n        shadowOffsetX: 0,\n        shadowColor: 'rgba(0, 0, 0, 0.5)'\n      }\n    }\n  }]\n};\nexport default {\n  name: 'Home',\n  data() {\n    return {\n      user: JSON.parse(localStorage.getItem('xm-user') || '{}'),\n      notices: []\n    };\n  },\n  mounted() {\n    this.$request.get('/notice/selectAll').then(res => {\n      this.notices = res.data || [];\n    });\n\n    // 柱状图\n    let barDom = document.getElementById('bar');\n    let barChart = echarts.init(barDom);\n    this.$request.get('/foods/selectCount').then(res => {\n      barOption.xAxis.data = res.data?.map(v => v.date);\n      barOption.series[0].data = res.data?.map(v => v.count);\n      this.$request.get('/notebook/selectCount').then(res => {\n        barOption.series[1].data = res.data?.map(v => v.count);\n        barChart.setOption(barOption);\n      });\n    });\n\n    // 饼图\n    let pieDom = document.getElementById('pie');\n    let pieChart = echarts.init(pieDom);\n    this.$request.get('/foods/selectCategoryCount').then(res => {\n      pieOption.series[0].data = res.data || []; //  [{name: 'xxxx', value: 10}]\n      pieChart.setOption(pieOption);\n    });\n  }\n};","map":{"version":3,"names":["echarts","barOption","title","text","left","tooltip","trigger","legend","xAxis","type","data","yAxis","series","name","smooth","pieOption","subtext","orient","center","radius","label","show","formatter","param","percent","emphasis","itemStyle","shadowBlur","shadowOffsetX","shadowColor","user","JSON","parse","localStorage","getItem","notices","mounted","$request","get","then","res","barDom","document","getElementById","barChart","init","map","v","date","count","setOption","pieDom","pieChart"],"sources":["src/views/manager/Home.vue"],"sourcesContent":["<template>\n  <div>\n    <div class=\"card\" style=\"padding: 15px; margin-bottom: 10px\">\n      您好，{{ user?.name }}！欢迎使用本系统\n    </div>\n\n    <el-row :gutter=\"10\">\n      <el-col :span=\"12\">\n        <div class=\"card\">\n          <div style=\"width: 100%; height: 400px\" id=\"bar\"></div>\n        </div>\n      </el-col>\n      <el-col :span=\"12\">\n        <div class=\"card\">\n          <div style=\"width: 100%; height: 400px\" id=\"pie\"></div>\n        </div>\n      </el-col>\n    </el-row>\n\n    <div style=\"display: flex; margin: 10px 0\">\n      <div style=\"width: 50%;\" class=\"card\">\n        <div style=\"margin-bottom: 30px; font-size: 20px; font-weight: bold\">公告列表</div>\n        <div >\n          <el-timeline  reverse slot=\"reference\">\n            <el-timeline-item v-for=\"item in notices\" :key=\"item.id\" :timestamp=\"item.time\">\n              <el-popover\n                  placement=\"right\"\n                  width=\"200\"\n                  trigger=\"hover\"\n                  :content=\"item.content\">\n                <span slot=\"reference\">{{ item.title }}</span>\n              </el-popover>\n            </el-timeline-item>\n          </el-timeline>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport * as echarts from 'echarts'\n\nconst barOption = {\n  title: {\n    text: '数据趋势图',\n    left: 'center'\n  },\n  tooltip: {\n    trigger: 'axis'\n  },\n  legend: {\n    left: 'left'\n  },\n  xAxis: {\n    type: 'category',\n    data: []\n  },\n  yAxis: {\n    type: 'value'\n  },\n  series: [\n    {\n      name: '菜谱',\n      data: [],\n      type: 'bar',\n      smooth: true\n    },\n    {\n      name: '笔记',\n      data: [],\n      type: 'bar',\n      smooth: true\n    }\n  ]\n}\n\nconst pieOption = {\n  title: {\n    text: '菜谱分类统计',\n    subtext: '比例图',\n    left: 'center'\n  },\n  tooltip: {\n    trigger: 'item'\n  },\n  legend: {\n    orient: 'vertical',\n    left: 'left'\n  },\n  series: [\n    {\n      type: 'pie',\n      center: ['50%', '60%'],\n      radius: '50%',\n      data: [],\n      label: {\n        show: true,\n        formatter(param) {\n          return param.name + ' (' + param.percent + '%)';\n        }\n      },\n      emphasis: {\n        itemStyle: {\n          shadowBlur: 10,\n          shadowOffsetX: 0,\n          shadowColor: 'rgba(0, 0, 0, 0.5)'\n        }\n      }\n    }\n  ]\n}\n\nexport default {\n  name: 'Home',\n  data() {\n    return {\n      user: JSON.parse(localStorage.getItem('xm-user') || '{}'),\n      notices: []\n    }\n  },\n  mounted() {\n    this.$request.get('/notice/selectAll').then(res => {\n      this.notices = res.data || []\n    })\n\n    // 柱状图\n    let barDom = document.getElementById('bar');\n    let barChart = echarts.init(barDom);\n\n    this.$request.get('/foods/selectCount').then(res => {\n      barOption.xAxis.data = res.data?.map(v => v.date)\n      barOption.series[0].data = res.data?.map(v => v.count)\n\n      this.$request.get('/notebook/selectCount').then(res => {\n        barOption.series[1].data = res.data?.map(v => v.count)\n        barChart.setOption(barOption)\n      })\n    })\n\n\n    // 饼图\n    let pieDom = document.getElementById('pie');\n    let pieChart = echarts.init(pieDom);\n    this.$request.get('/foods/selectCategoryCount').then(res => {\n      pieOption.series[0].data = res.data || []  //  [{name: 'xxxx', value: 10}]\n      pieChart.setOption(pieOption)\n    })\n  }\n}\n</script>\n"],"mappings":"AAyCA,YAAAA,OAAA;AAEA,MAAAC,SAAA;EACAC,KAAA;IACAC,IAAA;IACAC,IAAA;EACA;EACAC,OAAA;IACAC,OAAA;EACA;EACAC,MAAA;IACAH,IAAA;EACA;EACAI,KAAA;IACAC,IAAA;IACAC,IAAA;EACA;EACAC,KAAA;IACAF,IAAA;EACA;EACAG,MAAA,GACA;IACAC,IAAA;IACAH,IAAA;IACAD,IAAA;IACAK,MAAA;EACA,GACA;IACAD,IAAA;IACAH,IAAA;IACAD,IAAA;IACAK,MAAA;EACA;AAEA;AAEA,MAAAC,SAAA;EACAb,KAAA;IACAC,IAAA;IACAa,OAAA;IACAZ,IAAA;EACA;EACAC,OAAA;IACAC,OAAA;EACA;EACAC,MAAA;IACAU,MAAA;IACAb,IAAA;EACA;EACAQ,MAAA,GACA;IACAH,IAAA;IACAS,MAAA;IACAC,MAAA;IACAT,IAAA;IACAU,KAAA;MACAC,IAAA;MACAC,UAAAC,KAAA;QACA,OAAAA,KAAA,CAAAV,IAAA,UAAAU,KAAA,CAAAC,OAAA;MACA;IACA;IACAC,QAAA;MACAC,SAAA;QACAC,UAAA;QACAC,aAAA;QACAC,WAAA;MACA;IACA;EACA;AAEA;AAEA;EACAhB,IAAA;EACAH,KAAA;IACA;MACAoB,IAAA,EAAAC,IAAA,CAAAC,KAAA,CAAAC,YAAA,CAAAC,OAAA;MACAC,OAAA;IACA;EACA;EACAC,QAAA;IACA,KAAAC,QAAA,CAAAC,GAAA,sBAAAC,IAAA,CAAAC,GAAA;MACA,KAAAL,OAAA,GAAAK,GAAA,CAAA9B,IAAA;IACA;;IAEA;IACA,IAAA+B,MAAA,GAAAC,QAAA,CAAAC,cAAA;IACA,IAAAC,QAAA,GAAA5C,OAAA,CAAA6C,IAAA,CAAAJ,MAAA;IAEA,KAAAJ,QAAA,CAAAC,GAAA,uBAAAC,IAAA,CAAAC,GAAA;MACAvC,SAAA,CAAAO,KAAA,CAAAE,IAAA,GAAA8B,GAAA,CAAA9B,IAAA,EAAAoC,GAAA,CAAAC,CAAA,IAAAA,CAAA,CAAAC,IAAA;MACA/C,SAAA,CAAAW,MAAA,IAAAF,IAAA,GAAA8B,GAAA,CAAA9B,IAAA,EAAAoC,GAAA,CAAAC,CAAA,IAAAA,CAAA,CAAAE,KAAA;MAEA,KAAAZ,QAAA,CAAAC,GAAA,0BAAAC,IAAA,CAAAC,GAAA;QACAvC,SAAA,CAAAW,MAAA,IAAAF,IAAA,GAAA8B,GAAA,CAAA9B,IAAA,EAAAoC,GAAA,CAAAC,CAAA,IAAAA,CAAA,CAAAE,KAAA;QACAL,QAAA,CAAAM,SAAA,CAAAjD,SAAA;MACA;IACA;;IAGA;IACA,IAAAkD,MAAA,GAAAT,QAAA,CAAAC,cAAA;IACA,IAAAS,QAAA,GAAApD,OAAA,CAAA6C,IAAA,CAAAM,MAAA;IACA,KAAAd,QAAA,CAAAC,GAAA,+BAAAC,IAAA,CAAAC,GAAA;MACAzB,SAAA,CAAAH,MAAA,IAAAF,IAAA,GAAA8B,GAAA,CAAA9B,IAAA;MACA0C,QAAA,CAAAF,SAAA,CAAAnC,SAAA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}